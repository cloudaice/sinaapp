#-*- encoding:utf8 -*-
from sdk.weibo import APIClient
import time

APP_KEY = 'xxxxxxxxx' # app key
APP_SECRET = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxx' # app secret
CALLBACK_URL = 'http://www.baidu.com'


client = APIClient(APP_KEY, APP_SECRET, CALLBACK_URL);
access_token = '2.00FaDqzBIxwDcCd27f003177A6fjWC'
expires_in = 1342077789
client.set_access_token(access_token, expires_in)

def getAllFriendsDetail(filename, **attrs):
    handle = open(filename, 'w')
    print attrs
    cursor = 0
    while True:
        r = client.get.friendships__friends(cursor=cursor, **attrs)
        print r
        cursor = r['next_cursor']
        for user in r['users']:
            handle.write(str(user['id']) + ',' + user['screen_name'] + "\n")
        if cursor == 0:
            break
    handle.close();
    print("Done\n")
    
getAllFriendsDetail("淘宝秘语粉丝详细信息.txt", count=100, screen_name=u"淘宝秘语")
